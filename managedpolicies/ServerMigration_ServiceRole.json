{"name": "ServerMigration_ServiceRole", "deprecated": false, "createdate": "2020-10-15T17:26:32Z", "updatedate": "2020-10-15T17:26:32+00:00", "version": "v2", "malformed": false, "unknown_actions": [], "access_levels": ["List", "Read", "Tagging", "Write", "Permissions management"], "document": {"Version": "2012-10-17", "Statement": [{"Effect": "Allow", "Action": ["cloudformation:CreateChangeSet", "cloudformation:CreateStack"], "Resource": "arn:aws:cloudformation:*:*:stack/sms-app-*/*", "Condition": {"Null": {"cloudformation:ResourceTypes": "false"}, "ForAllValues:StringEquals": {"cloudformation:ResourceTypes": ["AWS::EC2::Instance", "AWS::ApplicationInsights::Application", "AWS::ResourceGroups::Group"]}}}, {"Effect": "Allow", "Action": ["cloudformation:DeleteStack", "cloudformation:ExecuteChangeSet", "cloudformation:DeleteChangeSet", "cloudformation:DescribeChangeSet", "cloudformation:DescribeStacks", "cloudformation:DescribeStackEvents", "cloudformation:DescribeStackResource", "cloudformation:DescribeStackResources", "cloudformation:GetTemplate"], "Resource": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}, {"Effect": "Allow", "Action": ["cloudformation:ValidateTemplate", "s3:ListAllMyBuckets"], "Resource": "*"}, {"Effect": "Allow", "Action": ["s3:CreateBucket", "s3:DeleteBucket", "s3:DeleteObject", "s3:GetBucketAcl", "s3:GetBucketLocation", "s3:GetObject", "s3:ListBucket", "s3:PutObject", "s3:PutObjectAcl", "s3:PutLifecycleConfiguration"], "Resource": "arn:aws:s3:::sms-app-*"}, {"Effect": "Allow", "Action": ["sms:CreateReplicationJob", "sms:DeleteReplicationJob", "sms:GetReplicationJobs", "sms:GetReplicationRuns", "sms:GetServers", "sms:ImportServerCatalog", "sms:StartOnDemandReplicationRun", "sms:UpdateReplicationJob"], "Resource": "*"}, {"Effect": "Allow", "Action": ["ssm:SendCommand"], "Resource": ["arn:aws:ssm:*::document/AWS-RunRemoteScript", "arn:aws:s3:::sms-app-*"]}, {"Effect": "Allow", "Action": ["ssm:SendCommand"], "Resource": "arn:aws:ec2:*:*:instance/*", "Condition": {"StringEquals": {"ssm:resourceTag/UseForSMSApplicationValidation": ["true"]}}}, {"Effect": "Allow", "Action": ["ssm:CancelCommand", "ssm:GetCommandInvocation"], "Resource": "*"}, {"Effect": "Allow", "Action": ["ec2:CreateTags"], "Resource": "arn:aws:ec2:*:*:snapshot/*", "Condition": {"StringEquals": {"ec2:CreateAction": "CopySnapshot"}}}, {"Effect": "Allow", "Action": ["ec2:CopySnapshot"], "Resource": "arn:aws:ec2:*:*:snapshot/*", "Condition": {"StringLike": {"aws:RequestTag/SMSJobId": ["sms-*"]}}}, {"Effect": "Allow", "Action": ["ec2:ModifySnapshotAttribute", "ec2:DeleteSnapshot"], "Resource": "arn:aws:ec2:*:*:snapshot/*", "Condition": {"StringLike": {"ec2:ResourceTag/SMSJobId": ["sms-*"]}}}, {"Effect": "Allow", "Action": ["ec2:CopyImage", "ec2:DescribeImages", "ec2:DescribeInstances", "ec2:DescribeSnapshots", "ec2:DescribeSnapshotAttribute", "ec2:DeregisterImage", "ec2:ImportImage", "ec2:DescribeImportImageTasks", "ec2:GetEbsEncryptionByDefault"], "Resource": "*"}, {"Effect": "Allow", "Action": ["iam:GetRole", "iam:GetInstanceProfile"], "Resource": "*"}, {"Effect": "Allow", "Action": ["ec2:DisassociateIamInstanceProfile", "ec2:AssociateIamInstanceProfile", "ec2:ReplaceIamInstanceProfileAssociation"], "Resource": "arn:aws:ec2:*:*:instance/*", "Condition": {"StringLike": {"ec2:ResourceTag/aws:cloudformation:stack-id": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}, {"Effect": "Allow", "Action": ["iam:PassRole"], "Resource": "*", "Condition": {"StringEquals": {"iam:PassedToService": "ec2.amazonaws.com"}}}, {"Effect": "Allow", "Action": ["iam:PassRole"], "Resource": "*", "Condition": {"StringEqualsIfExists": {"iam:PassedToService": "cloudformation.amazonaws.com"}, "StringLike": {"iam:AssociatedResourceArn": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}]}, "effective_actions": [{"action": "cloudformation:CreateChangeSet", "effective_action": "cloudformation:CreateChangeSet", "access_level": "Write", "condition": {"Null": {"cloudformation:ResourceTypes": "false"}, "ForAllValues:StringEquals": {"cloudformation:ResourceTypes": ["AWS::EC2::Instance", "AWS::ApplicationInsights::Application", "AWS::ResourceGroups::Group"]}}}, {"action": "cloudformation:CreateStack", "effective_action": "cloudformation:CreateStack", "access_level": "Write", "condition": {"Null": {"cloudformation:ResourceTypes": "false"}, "ForAllValues:StringEquals": {"cloudformation:ResourceTypes": ["AWS::EC2::Instance", "AWS::ApplicationInsights::Application", "AWS::ResourceGroups::Group"]}}}, {"action": "cloudformation:DeleteStack", "effective_action": "cloudformation:DeleteStack", "access_level": "Write", "condition": null}, {"action": "cloudformation:ExecuteChangeSet", "effective_action": "cloudformation:ExecuteChangeSet", "access_level": "Write", "condition": null}, {"action": "cloudformation:DeleteChangeSet", "effective_action": "cloudformation:DeleteChangeSet", "access_level": "Write", "condition": null}, {"action": "cloudformation:DescribeChangeSet", "effective_action": "cloudformation:DescribeChangeSet", "access_level": "Read", "condition": null}, {"action": "cloudformation:DescribeStacks", "effective_action": "cloudformation:DescribeStacks", "access_level": "List", "condition": null}, {"action": "cloudformation:DescribeStackEvents", "effective_action": "cloudformation:DescribeStackEvents", "access_level": "Read", "condition": null}, {"action": "cloudformation:DescribeStackResource", "effective_action": "cloudformation:DescribeStackResource", "access_level": "Read", "condition": null}, {"action": "cloudformation:DescribeStackResources", "effective_action": "cloudformation:DescribeStackResources", "access_level": "Read", "condition": null}, {"action": "cloudformation:GetTemplate", "effective_action": "cloudformation:GetTemplate", "access_level": "Read", "condition": null}, {"action": "cloudformation:ValidateTemplate", "effective_action": "cloudformation:ValidateTemplate", "access_level": "Read", "condition": null}, {"action": "s3:ListAllMyBuckets", "effective_action": "s3:ListAllMyBuckets", "access_level": "List", "condition": null}, {"action": "s3:CreateBucket", "effective_action": "s3:CreateBucket", "access_level": "Write", "condition": null}, {"action": "s3:DeleteBucket", "effective_action": "s3:DeleteBucket", "access_level": "Write", "condition": null}, {"action": "s3:DeleteObject", "effective_action": "s3:DeleteObject", "access_level": "Write", "condition": null}, {"action": "s3:GetBucketAcl", "effective_action": "s3:GetBucketAcl", "access_level": "Read", "condition": null}, {"action": "s3:GetBucketLocation", "effective_action": "s3:GetBucketLocation", "access_level": "Read", "condition": null}, {"action": "s3:GetObject", "effective_action": "s3:GetObject", "access_level": "Read", "condition": null}, {"action": "s3:ListBucket", "effective_action": "s3:ListBucket", "access_level": "List", "condition": null}, {"action": "s3:PutObject", "effective_action": "s3:PutObject", "access_level": "Write", "condition": null}, {"action": "s3:PutObjectAcl", "effective_action": "s3:PutObjectAcl", "access_level": "Permissions management", "condition": null}, {"action": "s3:PutLifecycleConfiguration", "effective_action": "s3:PutLifecycleConfiguration", "access_level": "Write", "condition": null}, {"action": "sms:CreateReplicationJob", "effective_action": "sms:CreateReplicationJob", "access_level": "Write", "condition": null}, {"action": "sms:DeleteReplicationJob", "effective_action": "sms:DeleteReplicationJob", "access_level": "Write", "condition": null}, {"action": "sms:GetReplicationJobs", "effective_action": "sms:GetReplicationJobs", "access_level": "Read", "condition": null}, {"action": "sms:GetReplicationRuns", "effective_action": "sms:GetReplicationRuns", "access_level": "Read", "condition": null}, {"action": "sms:GetServers", "effective_action": "sms:GetServers", "access_level": "Read", "condition": null}, {"action": "sms:ImportServerCatalog", "effective_action": "sms:ImportServerCatalog", "access_level": "Write", "condition": null}, {"action": "sms:StartOnDemandReplicationRun", "effective_action": "sms:StartOnDemandReplicationRun", "access_level": "Write", "condition": null}, {"action": "sms:UpdateReplicationJob", "effective_action": "sms:UpdateReplicationJob", "access_level": "Write", "condition": null}, {"action": "ssm:SendCommand", "effective_action": "ssm:SendCommand", "access_level": "Write", "condition": null}, {"action": "ssm:SendCommand", "effective_action": "ssm:SendCommand", "access_level": "Write", "condition": {"StringEquals": {"ssm:resourceTag/UseForSMSApplicationValidation": ["true"]}}}, {"action": "ssm:CancelCommand", "effective_action": "ssm:CancelCommand", "access_level": "Write", "condition": null}, {"action": "ssm:GetCommandInvocation", "effective_action": "ssm:GetCommandInvocation", "access_level": "Read", "condition": null}, {"action": "ec2:CreateTags", "effective_action": "ec2:CreateTags", "access_level": "Tagging", "condition": {"StringEquals": {"ec2:CreateAction": "CopySnapshot"}}}, {"action": "ec2:CopySnapshot", "effective_action": "ec2:CopySnapshot", "access_level": "Write", "condition": {"StringLike": {"aws:RequestTag/SMSJobId": ["sms-*"]}}}, {"action": "ec2:ModifySnapshotAttribute", "effective_action": "ec2:ModifySnapshotAttribute", "access_level": "Permissions management", "condition": {"StringLike": {"ec2:ResourceTag/SMSJobId": ["sms-*"]}}}, {"action": "ec2:DeleteSnapshot", "effective_action": "ec2:DeleteSnapshot", "access_level": "Write", "condition": {"StringLike": {"ec2:ResourceTag/SMSJobId": ["sms-*"]}}}, {"action": "ec2:CopyImage", "effective_action": "ec2:CopyImage", "access_level": "Write", "condition": null}, {"action": "ec2:DescribeImages", "effective_action": "ec2:DescribeImages", "access_level": "List", "condition": null}, {"action": "ec2:DescribeInstances", "effective_action": "ec2:DescribeInstances", "access_level": "List", "condition": null}, {"action": "ec2:DescribeSnapshots", "effective_action": "ec2:DescribeSnapshots", "access_level": "List", "condition": null}, {"action": "ec2:DescribeSnapshotAttribute", "effective_action": "ec2:DescribeSnapshotAttribute", "access_level": "List", "condition": null}, {"action": "ec2:DeregisterImage", "effective_action": "ec2:DeregisterImage", "access_level": "Write", "condition": null}, {"action": "ec2:ImportImage", "effective_action": "ec2:ImportImage", "access_level": "Write", "condition": null}, {"action": "ec2:DescribeImportImageTasks", "effective_action": "ec2:DescribeImportImageTasks", "access_level": "List", "condition": null}, {"action": "ec2:GetEbsEncryptionByDefault", "effective_action": "ec2:GetEbsEncryptionByDefault", "access_level": "Read", "condition": null}, {"action": "iam:GetRole", "effective_action": "iam:GetRole", "access_level": "Read", "condition": null}, {"action": "iam:GetInstanceProfile", "effective_action": "iam:GetInstanceProfile", "access_level": "Read", "condition": null}, {"action": "ec2:DisassociateIamInstanceProfile", "effective_action": "ec2:DisassociateIamInstanceProfile", "access_level": "Write", "condition": {"StringLike": {"ec2:ResourceTag/aws:cloudformation:stack-id": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}, {"action": "ec2:AssociateIamInstanceProfile", "effective_action": "ec2:AssociateIamInstanceProfile", "access_level": "Write", "condition": {"StringLike": {"ec2:ResourceTag/aws:cloudformation:stack-id": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}, {"action": "ec2:ReplaceIamInstanceProfileAssociation", "effective_action": "ec2:ReplaceIamInstanceProfileAssociation", "access_level": "Write", "condition": {"StringLike": {"ec2:ResourceTag/aws:cloudformation:stack-id": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}, {"action": "iam:PassRole", "effective_action": "iam:PassRole", "access_level": "Write", "condition": {"StringEquals": {"iam:PassedToService": "ec2.amazonaws.com"}}}, {"action": "iam:PassRole", "effective_action": "iam:PassRole", "access_level": "Write", "condition": {"StringEqualsIfExists": {"iam:PassedToService": "cloudformation.amazonaws.com"}, "StringLike": {"iam:AssociatedResourceArn": "arn:aws:cloudformation:*:*:stack/sms-app-*/*"}}}]}